(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{18:function(t,e,a){},20:function(t,e,a){"use strict";a.r(e);var c=a(1),n=a.n(c),r=a(9),s=a.n(r),i=a(4),o=n.a.createContext(),l=a(7),j=a(2),d=a(3),u={tasks:[],searchReq:"",filter:"all"},b=function(t){var e=t.filter((function(t){return t.important&&!t.done})),a=t.filter((function(t){return!t.important&&!t.done})),c=t.filter((function(t){return t.done}));return[].concat(Object(d.a)(e),Object(d.a)(a),Object(d.a)(c))},O=function(t,e,a){var c=t.findIndex((function(t){return t.id===e})),n=t[c];if(a){var r=Object(j.a)(Object(j.a)({},n),{},Object(l.a)({},a,!n[a]));return b([].concat(Object(d.a)(t.slice(0,c)),[r],Object(d.a)(t.slice(c+1))))}return b([].concat(Object(d.a)(t.slice(0,c)),Object(d.a)(t.slice(c+1))))},f=function(t,e){switch(e.type){case"FETCH_TASKS":return Object(j.a)(Object(j.a)({},t),{},{tasks:b(e.payload)});case"ADD_TASK":return Object(j.a)(Object(j.a)({},t),{},{tasks:(a=t.tasks,c=e.payload,b([c].concat(Object(d.a)(a))))});case"SEARCH_TASKS":return Object(j.a)(Object(j.a)({},t),{},{searchReq:e.payload});case"FILTER_TASKS":return Object(j.a)(Object(j.a)({},t),{},{filter:e.payload});case"DONE_TASK":return Object(j.a)(Object(j.a)({},t),{},{tasks:O(t.tasks,e.payload,"done")});case"IMPORTANT_TASK":return Object(j.a)(Object(j.a)({},t),{},{tasks:O(t.tasks,e.payload,"important")});case"DELETE_TASK":return Object(j.a)(Object(j.a)({},t),{},{tasks:O(t.tasks,e.payload)});default:return t}var a,c},p=(a(18),a(0)),h=function(t){var e=t.tasks,a=Object(c.useState)(null),n=Object(i.a)(a,2),r=n[0],s=n[1];return Object(c.useEffect)((function(){s(e.filter((function(t){return!t.done})).length)}),[e]),Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("h1",{className:"header-title",children:"Your tasks"}),Object(p.jsx)("div",{className:"header-status",children:Object(p.jsxs)("div",{className:"all",children:[Object(p.jsx)("span",{children:"actual"})," ",Object(p.jsx)("span",{children:r})]})})]})},x=a(22),m=function(t){var e=t.onSearchInput,a=Object(c.useState)(""),n=Object(i.a)(a,2),r=n[0],s=n[1];return Object(c.useEffect)((function(){e(r)}),[r]),Object(p.jsx)("div",{className:"search",children:Object(p.jsx)("input",{className:"input search-input",type:"text",placeholder:"search",value:r,onChange:function(t){return s(t.target.value)}})})},v=function(t){var e=t.onFilterChange,a=t.filter,c=function(t){return t===a?"btn btn-".concat(t," active"):"btn btn-".concat(t)};return Object(p.jsxs)("div",{className:"filters",onClick:function(t){e(t.target.dataset.filter)},children:[Object(p.jsx)("button",{className:c("all"),"data-filter":"all",children:Object(p.jsx)("i",{"data-filter":"all",children:"all"})}),Object(p.jsx)("button",{className:c("done"),"data-filter":"done",children:Object(p.jsx)("i",{"data-filter":"done",className:"fas fa-check-circle"})}),Object(p.jsx)("button",{className:c("important"),"data-filter":"important",children:Object(p.jsx)("i",{"data-filter":"important",className:"fas fa-star"})})]})},y=function(){var t=Object(c.useContext)(o),e=t.state.filter,a=t.dispatch;return Object(p.jsxs)("div",{className:"controls",children:[Object(p.jsx)(m,{onSearchInput:function(t){a(function(t){return{type:"SEARCH_TASKS",payload:t}}(t))}}),Object(p.jsx)(v,{onFilterChange:function(t){a(function(t){return{type:"FILTER_TASKS",payload:t}}(t))},filter:e})]})},N=function(t){var e=t.text,a=t.done,c=t.important,n=t.id,r="todo-list-item";a&&(r+=" done"),c&&(r+=" important");var s=c?"fas fa-star":"far fa-star";return Object(p.jsxs)("li",{className:r,id:n,children:[Object(p.jsx)("i",{className:"fas fa-star dummy"}),Object(p.jsxs)("div",{className:"text","data-type":"done",children:[Object(p.jsx)("i",{className:"fas fa-check-circle","data-type":"done"}),Object(p.jsx)("p",{"data-type":"done",children:e})]}),Object(p.jsxs)("div",{className:"item-controls",children:[Object(p.jsx)("button",{className:"btn btn-remove","data-type":"delete",children:Object(p.jsx)("i",{className:"fa fa-trash","data-type":"delete"})}),Object(p.jsx)("button",{className:"btn btn-important","data-type":"important",children:Object(p.jsx)("i",{className:s,"data-type":"important"})})]})]})},k=function(){return Object(p.jsx)("div",{className:"arrow",children:Object(p.jsx)("i",{className:"fa fa-chevron-down"})})},S=function(t){var e=t.text,a=t.arrow;return Object(p.jsxs)("div",{className:"empty-list",children:[Object(p.jsx)("h3",{children:e}),a&&Object(p.jsx)(k,{})]})},T=function(t){return function(e){var a=Object(c.useContext)(o).state,n=a.tasks,r=a.filter,s=a.searchReq,i=function(t){return""===s?t:t.filter((function(t){if(t.text.toLowerCase().includes(s.toLowerCase()))return t}))}(function(t){return"all"===r?t:"important"===r?t.filter((function(t){return t.important&&!t.done})):t.filter((function(t){return t[r]}))}(n));return Object(p.jsx)(t,Object(j.a)({filteredTasks:i,tasks:n},e))}}((function(t){var e=t.filteredTasks,a=t.tasks,n=Object(c.useContext)(o).dispatch,r=e.map((function(t){return Object(c.createElement)(N,Object(j.a)(Object(j.a)({},t),{},{key:t.id}))}));return Object(p.jsx)("ul",{className:"todo-list",onClick:function(t){if(t.target.dataset.type){var e=t.target.dataset.type,a=t.target.closest(".todo-list-item").id;"done"===e&&n(function(t){return{type:"DONE_TASK",payload:t}}(a)),"delete"===e&&n(function(t){return{type:"DELETE_TASK",payload:t}}(a)),"important"===e&&n(function(t){return{type:"IMPORTANT_TASK",payload:t}}(a))}},children:a.length?e.length?r:Object(p.jsx)(S,{text:"Nothing found"}):Object(p.jsx)(S,{text:"Add new task",arrow:!0})})})),A=function(){var t=Object(c.useState)(""),e=Object(i.a)(t,2),a=e[0],n=e[1],r=Object(c.useContext)(o).dispatch;return Object(p.jsx)("div",{className:"add-panel",children:Object(p.jsxs)("div",{className:"add-field",children:[Object(p.jsx)("input",{className:"input add-input",type:"text",value:a,onChange:function(t){return n(t.target.value)}}),Object(p.jsx)("button",{className:"btn",onClick:function(){var t;""!==a&&r((t=a,{type:"ADD_TASK",payload:{id:Object(x.a)(),text:t,important:!1,done:!1}})),n(""),document.querySelector(".add-input").focus(),window.scrollTo({top:0,behavior:"smooth"})},children:"add"})]})})},E=function(){var t=Object(c.useReducer)(f,u),e=Object(i.a)(t,2),a=e[0],n=e[1];return Object(c.useEffect)((function(){var t=JSON.parse(localStorage.getItem("tasks"))||[];n({type:"FETCH_TASKS",payload:t})}),[]),Object(c.useEffect)((function(){var t;t=a.tasks,localStorage.tasks=JSON.stringify(t)}),[a.tasks]),Object(p.jsx)(o.Provider,{value:{state:a,dispatch:n},children:Object(p.jsx)("div",{className:"wrapper-outer",children:Object(p.jsxs)("div",{className:"wrapper",children:[Object(p.jsx)(h,{tasks:a.tasks}),Object(p.jsx)(y,{}),Object(p.jsx)(T,{}),Object(p.jsx)(A,{})]})})})},g=a(10),C=a(11),w=a(13),K=a(12),_=function(){return Object(p.jsxs)("div",{className:"error-indicator",children:[Object(p.jsx)("h2",{children:"Error"}),Object(p.jsx)("span",{children:"we have some trouble"}),Object(p.jsx)("span",{children:"try to reload"})]})},R=function(t){Object(w.a)(a,t);var e=Object(K.a)(a);function a(){var t;Object(g.a)(this,a);for(var c=arguments.length,n=new Array(c),r=0;r<c;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))).state={error:!1},t}return Object(C.a)(a,[{key:"componentDidCatch",value:function(){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?Object(p.jsx)(_,{}):this.props.children}}]),a}(c.Component);s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(R,{children:Object(p.jsx)(E,{})})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.89556ebf.chunk.js.map